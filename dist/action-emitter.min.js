!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("fbemitter"));else if("function"==typeof define&&define.amd)define(["fbemitter"],e);else{var i=e("object"==typeof exports?require("fbemitter"):t.fbemitter);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.action=t}return Object.defineProperty(t.prototype,"Action",{get:function(){return this.action},enumerable:!0,configurable:!0}),t}();e.AnyAction=i},function(e,i){e.exports=t},function(t,e,i){var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=i(0),s=function(){function t(){this.fbEmmiter=new r.EventEmitter,this.actionsList=new Array,this.uniqueEventTypeNumber=0}return Object.defineProperty(t.prototype,"getNextEventType",{get:function(){return"ACTION_EMMITER__"+ ++this.uniqueEventTypeNumber},enumerable:!0,configurable:!0}),t.prototype.searchActionDetailsByAction=function(t){for(var e=0;e<this.actionsList.length;e++){var i=this.actionsList[e];if(t instanceof i.ActionClass)return i}},t.prototype.searchActionDetailsByActionClass=function(t){for(var e=0;e<this.actionsList.length;e++){var i=this.actionsList[e];if(i.ActionClass===t)return i}},t.prototype.createNewActionDetails=function(t){return{ActionClass:t,EventType:this.getNextEventType,ListenersLength:0}},t.prototype.subscriptionRemover=function(t,e){if(null!=e&&e.remove(),null!=t)return t.ListenersLength>1?void t.ListenersLength--:void this.removeActionListeners(t)},t.prototype.removeActionListeners=function(t){this.actionsList.filter(function(t){return null!=t})},t.prototype.removeAllActionsListeners=function(){this.actionsList=new Array,this.uniqueEventTypeNumber=0},t.prototype.isValidFunction=function(t){return"function"==typeof t},t.prototype.addListener=function(t,e){if(!this.isValidFunction(t))throw new Error("ActionEmitter.addListener(): `actionClass` is not a class or function.");if(!this.isValidFunction(e))throw new Error("ActionEmitter.addListener(): `listener` is not a function.");var i=this.searchActionDetailsByActionClass(t);if(null==i){var r=this.actionsList.push(this.createNewActionDetails(t))-1;i=this.actionsList[r]}var o=function(t){e(t)},s=this.fbEmmiter.addListener(i.EventType,o);return i.ListenersLength++,n({},s,{remove:this.subscriptionRemover.bind(this,i,s)})},t.prototype.emit=function(t){if("object"!=typeof t)throw new Error("ActioEmiter.emit(): `action` is not a proper object.");var e=this.searchActionDetailsByAction(t);null!=e&&this.fbEmmiter.emit(e.EventType,t);var i=this.searchActionDetailsByActionClass(o.AnyAction);if(null!=i){var n=new o.AnyAction(t);this.fbEmmiter.emit(i.EventType,n)}},t.prototype.listeners=function(t){var e=this.searchActionDetailsByActionClass(t);return null!=e?this.fbEmmiter.listeners(e.EventType):[]},t.prototype.once=function(t,e){var i=this;if(!this.isValidFunction(t))throw new Error("ActionEmitter.once(): `actionClass` is not a class or function.");if(!this.isValidFunction(e))throw new Error("ActionEmitter.once(): `listener` is not a function.");var n=this.searchActionDetailsByActionClass(t);if(null==n){var r=this.actionsList.push(this.createNewActionDetails(t))-1;n=this.actionsList[r]}var o=function(t){e(t),i.subscriptionRemover(n)},s=this.fbEmmiter.once(n.EventType,o);return{context:s.context,listener:s.listener,remove:this.subscriptionRemover.bind(this,n,s)}},t.prototype.removeAllListeners=function(t){var e,i;if(null!=t){if(null==(i=this.searchActionDetailsByActionClass(t)))return;e=i.EventType}this.fbEmmiter.removeAllListeners(e),null!=i?this.removeActionListeners(i):this.removeAllActionsListeners()},t}();e.ActionEmitter=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);e.ActionEmitter=n.ActionEmitter;var r=i(0);e.AnyAction=r.AnyAction;var o=i(1);e.EventSubscription=o.EventSubscription}])});