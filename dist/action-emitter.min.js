!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("fbemitter"));else if("function"==typeof define&&define.amd)define(["fbemitter"],e);else{var n=e("object"==typeof exports?require("fbemitter"):t.fbemitter);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.action=t}return Object.defineProperty(t.prototype,"Action",{get:function(){return this.action},enumerable:!0,configurable:!0}),t}();e.AnyAction=n},function(e,n){e.exports=t},function(t,e,n){var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),s=function(){function t(){this.fbEmmiter=new o.EventEmitter,this.actionsList=new Array,this.uniqueEventTypeNumber=0}return Object.defineProperty(t.prototype,"getNextEventType",{get:function(){return"ACTION_EMMITER__"+ ++this.uniqueEventTypeNumber},enumerable:!0,configurable:!0}),t.prototype.searchActionDetailsByAction=function(t){for(var e=0;e<this.actionsList.length;e++){var n=this.actionsList[e];if(t instanceof n.ActionClass)return n}},t.prototype.searchActionDetailsByActionClass=function(t){for(var e=0;e<this.actionsList.length;e++){var n=this.actionsList[e];if(n.ActionClass===t)return n}},t.prototype.createNewActionDetails=function(t){return{ActionClass:t,EventType:this.getNextEventType,ListenersLength:0}},t.prototype.subscriptionRemover=function(t,e){if(null!=e&&e.remove(),null!=t)return t.ListenersLength>1?void t.ListenersLength--:void this.removeActionListeners(t)},t.prototype.removeActionListeners=function(t){this.actionsList.filter(function(t){return null!=t})},t.prototype.removeAllActionsListeners=function(){this.actionsList=new Array,this.uniqueEventTypeNumber=0},t.prototype.isValidFunction=function(t){return"function"==typeof t},t.prototype.addListener=function(t,e){if(!this.isValidFunction(t))throw new Error("ActionEmitter.addListener(): `actionClass` is not a class or function.");if(!this.isValidFunction(e))throw new Error("ActionEmitter.addListener(): `listener` is not a function.");var n=this.searchActionDetailsByActionClass(t);if(null==n){var o=this.actionsList.push(this.createNewActionDetails(t))-1;n=this.actionsList[o]}var r=function(t){e(t)},s=this.fbEmmiter.addListener(n.EventType,r);return n.ListenersLength++,i({},s,{remove:this.subscriptionRemover.bind(this,n,s)})},t.prototype.emit=function(t){if("object"!=typeof t)throw new Error("ActioEmiter.emit(): `action` is not a proper object.");var e=this.searchActionDetailsByAction(t);null!=e&&this.fbEmmiter.emit(e.EventType,t);var n=this.searchActionDetailsByActionClass(r.AnyAction);if(null!=n){var i=new r.AnyAction(t);this.fbEmmiter.emit(n.EventType,i)}},t.prototype.listeners=function(t){var e=this.searchActionDetailsByActionClass(t);return null!=e?this.fbEmmiter.listeners(e.EventType):[]},t.prototype.listenersCount=function(t){if(null!=t){var e=this.searchActionDetailsByActionClass(t);return null==e?0:e.ListenersLength}for(var n=0,i=0;i<this.actionsList.length;i++){var e=this.actionsList[i];n+=e.ListenersLength}return n},t.prototype.once=function(t,e){var n=this;if(!this.isValidFunction(t))throw new Error("ActionEmitter.once(): `actionClass` is not a class or function.");if(!this.isValidFunction(e))throw new Error("ActionEmitter.once(): `listener` is not a function.");var i=this.searchActionDetailsByActionClass(t);if(null==i){var o=this.actionsList.push(this.createNewActionDetails(t))-1;i=this.actionsList[o]}var r=function(t){e(t),n.subscriptionRemover(i)};i.ListenersLength++;var s=this.fbEmmiter.once(i.EventType,r);return{context:s.context,listener:s.listener,remove:this.subscriptionRemover.bind(this,i,s)}},t.prototype.removeAllListeners=function(t){var e,n;if(null!=t){if(null==(n=this.searchActionDetailsByActionClass(t)))return;e=n.EventType}this.fbEmmiter.removeAllListeners(e),null!=n?this.removeActionListeners(n):this.removeAllActionsListeners()},t}();e.ActionEmitter=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(0),r=n(1);e.EventSubscription=r.EventSubscription;var s=function(){function t(){}return t}(),c=new i.ActionEmitter;c.once(o.AnyAction,function(t){console.log("ANY ACTION ONCE: ",t)}),c.addListener(o.AnyAction,function(t){console.log("ANY ACTION: ",t)}),c.addListener(o.AnyAction,function(t){console.log("ANY ACTION: ",t)}),c.addListener(s,function(t){console.log("TEST ACTION: ",t)}),c.once(s,function(t){console.log("TEST ACTION: ",t)}),console.log(c.listenersCount())}])});